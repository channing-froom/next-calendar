{"version":3,"file":"static/webpack/static/development/pages/search.js.ad4fa329aac96d548142.hot-update.js","sources":["webpack:///./lib/services/SearchService.js","webpack:///./node_modules/@material-ui/core/esm/index.js"],"sourcesContent":["import Router from 'next/router';\nimport fetch from 'isomorphic-fetch';\n\nexport default class SearchService {\n\n    /**\n     * create a new search request\n     * \n     * @param Date startDate \n     * @param Date endDate \n     */\n    static Search(startDate, endDate) {\n        // will throw exception if fails\n        this.ValidateDateRange(startDate, endDate);\n        this.Go(startDate, endDate);\n    }\n\n    /**\n     * Send user to the search page\n     * \n     * @param Date startDate \n     * @param Date endDate \n     */\n    static Go(startDate, endDate)\n    {\n        console.log('pushing to search');\n        Router.push({\n            pathname: '/search',\n            query: {\n                start: this.FormatDate(startDate),\n                end: this.FormatDate(endDate)\n            }\n          });\n    }\n\n    /**\n     * Formate the date into the required shape\n     * This works well for passing SEO type values through the URI\n     * \n     * @param Date value \n     */\n    static FormatDate(value) {\n        return new Date(value).toISOString().slice(0,10)\n    }\n\n    /**\n     * Generate a api url for this date\n     * \n     * @param Date date \n     */\n    static GetApiUrlForDate(date)\n    {\n        const value = date.toISOString().slice(5,10).replace('-', '/');\n        const url = \n        console.log(process.env.NODE_ENV);\n\n        return `http://numbersapi.com/${value}/date`;\n    }\n\n    static async CollectNotes(days)\n    {\n        var notes = [];\n\n        for(let i = 0; i < days.length; i++) {\n            const response = await fetch(this.GetApiUrlForDate(days[i]), {cache: \"force-cache\"})\n                .then(response => {\n                    // THERE SHOULD BE ERROR HANDLING HERE !!!\n                    return response.text();\n                })\n                .then(response => {\n                    notes.push(\n                        this.FormatNote(response, days[i])\n                    );\n                })\n                .catch(e => {console.log(e)});\n        }\n\n        return notes;\n    }\n\n    static FormatNote(note, date)\n    {\n        const months = ['January','February','March','April','May','June',\n                'July','August','September','October','November','December'];\n\n        const month = months[date.getMonth()],\n            day = date.getDate();\n\n        const nth = this.GetDateNt(day);\n        const dateString = `${month} ${day}${nth}`;\n        const noteString = note.replace(dateString, '');\n\n        return {\n            date: dateString,\n            note: noteString\n        };\n        \n    }\n\n    static GetDateNt(day)\n    {\n        if (day > 3 && day < 21) return 'th'; \n        switch (day % 10) {\n            case 1:  return \"st\";\n            case 2:  return \"nd\";\n            case 3:  return \"rd\";\n            default: return \"th\";\n        }\n    }\n\n    /**\n     * Validate a date range\n     * \n     * @param Date dateFrom \n     * @param Date dateTo \n     * @param bool throwException \n     */\n    static ValidateDateRange(dateFrom, dateTo, throwException = true) {\n        try {\n            this.ValidateDate(dateFrom);\n            this.ValidateDate(dateTo);\n        } catch (e) {\n            if (!throwException) {\n                return false;\n            }\n\n            throw e;\n        }\n\n        return true;\n    }\n\n    /**\n     * Simple check to see if the value passed is what we expect\n     * This is not a production ready function !\n     * \n     * @param Date value \n     */\n    static ValidateDate(value)\n    {\n        if (!value) {\n            throw \"Please provide all dates\";\n        } else if (!value instanceof Date) {\n            throw `Value passed is not a date ${value}`;\n        }\n    }\n\n    static IsMonday(date)\n    {\n        return date.getDay() === 1;\n    }\n\n    static HasLeapYear(years)\n    {\n        for (let i = 0; i < years.length; i++) {\n            if (new Date(years[i], 1, 29).getDate() === 29) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    static async CollectDateItems(dateFrom, dateTo) {\n        let days = [];\n        let years = [];\n        let mondays = 0;\n        dateFrom = new Date(dateFrom);\n        dateTo = new Date(dateTo);\n\n        // Resolve time difference so we can create a linear search\n        let current = dateFrom.getTime() < dateTo.getTime() ? dateFrom : dateTo;\n        const end = dateFrom.getTime() > dateTo.getTime() ? dateFrom : dateTo;\n        const endTime = end.getTime();\n        \n        // push the first item onto the array\n        days.push(new Date(current));\n\n        if (this.IsMonday(current)) {\n            mondays++;\n        }\n\n        // Create a array of all the values between\n        while (endTime > current.getTime()) {\n            days.push(current);\n\n            if (this.IsMonday(current)) {\n                mondays++;\n            }\n\n            // check to see if we tracking these years or not            \n            if (!years.includes(current.getFullYear())) {\n                years.push(current.getFullYear());\n            }\n\n            current = new Date(current.setDate(current.getDate() + 1));\n        }\n\n        return {\n            daysApart: days.length,\n            amountOfMondays: mondays,\n            hasLeapYear: this.HasLeapYear(years),\n            notes: await this.CollectNotes(days)\n        };\n    }\n}","/** @license Material-UI v4.2.0\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport * as colors from './colors';\nexport { colors };\nexport { createMuiTheme, createStyles, makeStyles, MuiThemeProvider, responsiveFontSizes, styled, useTheme, withStyles, withTheme } from './styles';\nexport { default as AppBar } from './AppBar';\nexport { default as Avatar } from './Avatar';\nexport { default as Backdrop } from './Backdrop';\nexport { default as Badge } from './Badge';\nexport { default as BottomNavigation } from './BottomNavigation';\nexport { default as BottomNavigationAction } from './BottomNavigationAction';\nexport { default as Box } from './Box';\nexport { default as Breadcrumbs } from './Breadcrumbs';\nexport { default as Button } from './Button';\nexport { default as ButtonBase } from './ButtonBase';\nexport { default as ButtonGroup } from './ButtonGroup';\nexport { default as Card } from './Card';\nexport { default as CardActionArea } from './CardActionArea';\nexport { default as CardActions } from './CardActions';\nexport { default as CardContent } from './CardContent';\nexport { default as CardHeader } from './CardHeader';\nexport { default as CardMedia } from './CardMedia';\nexport { default as Checkbox } from './Checkbox';\nexport { default as Chip } from './Chip';\nexport { default as CircularProgress } from './CircularProgress';\nexport { default as ClickAwayListener } from './ClickAwayListener';\nexport { default as Collapse } from './Collapse';\nexport { default as Container } from './Container';\nexport { default as CssBaseline } from './CssBaseline';\nexport { default as Dialog } from './Dialog';\nexport { default as DialogActions } from './DialogActions';\nexport { default as DialogContent } from './DialogContent';\nexport { default as DialogContentText } from './DialogContentText';\nexport { default as DialogTitle } from './DialogTitle';\nexport { default as Divider } from './Divider';\nexport { default as Drawer } from './Drawer';\nexport { default as ExpansionPanel } from './ExpansionPanel';\nexport { default as ExpansionPanelActions } from './ExpansionPanelActions';\nexport { default as ExpansionPanelDetails } from './ExpansionPanelDetails';\nexport { default as ExpansionPanelSummary } from './ExpansionPanelSummary';\nexport { default as Fab } from './Fab';\nexport { default as Fade } from './Fade';\nexport { default as FilledInput } from './FilledInput';\nexport { default as FormControl } from './FormControl';\nexport { default as FormControlLabel } from './FormControlLabel';\nexport { default as FormGroup } from './FormGroup';\nexport { default as FormHelperText } from './FormHelperText';\nexport { default as FormLabel } from './FormLabel';\nexport { default as Grid } from './Grid';\nexport { default as GridList } from './GridList';\nexport { default as GridListTile } from './GridListTile';\nexport { default as GridListTileBar } from './GridListTileBar';\nexport { default as Grow } from './Grow';\nexport { default as Hidden } from './Hidden';\nexport { default as Icon } from './Icon';\nexport { default as IconButton } from './IconButton';\nexport { default as Input } from './Input';\nexport { default as InputAdornment } from './InputAdornment';\nexport { default as InputBase } from './InputBase';\nexport { default as InputLabel } from './InputLabel';\nexport { default as LinearProgress } from './LinearProgress';\nexport { default as Link } from './Link';\nexport { default as List } from './List';\nexport { default as ListItem } from './ListItem';\nexport { default as ListItemAvatar } from './ListItemAvatar';\nexport { default as ListItemIcon } from './ListItemIcon';\nexport { default as ListItemSecondaryAction } from './ListItemSecondaryAction';\nexport { default as ListItemText } from './ListItemText';\nexport { default as ListSubheader } from './ListSubheader';\nexport { default as Menu } from './Menu';\nexport { default as MenuItem } from './MenuItem';\nexport { default as MenuList } from './MenuList';\nexport { default as MobileStepper } from './MobileStepper';\nexport { default as Modal, ModalManager } from './Modal';\nexport { default as NativeSelect } from './NativeSelect';\nexport { default as NoSsr } from './NoSsr';\nexport { default as OutlinedInput } from './OutlinedInput';\nexport { default as Paper } from './Paper';\nexport { default as Popover } from './Popover';\nexport { default as Popper } from './Popper';\nexport { default as Portal } from './Portal';\nexport { default as Radio } from './Radio';\nexport { default as RadioGroup } from './RadioGroup';\nexport { default as RootRef } from './RootRef';\nexport { default as Select } from './Select';\nexport { default as Slide } from './Slide';\nexport { default as Slider } from './Slider';\nexport { default as Snackbar } from './Snackbar';\nexport { default as SnackbarContent } from './SnackbarContent';\nexport { default as Step } from './Step';\nexport { default as StepButton } from './StepButton';\nexport { default as StepConnector } from './StepConnector';\nexport { default as StepContent } from './StepContent';\nexport { default as StepIcon } from './StepIcon';\nexport { default as StepLabel } from './StepLabel';\nexport { default as Stepper } from './Stepper';\nexport { default as SvgIcon } from './SvgIcon';\nexport { default as SwipeableDrawer } from './SwipeableDrawer';\nexport { default as Switch } from './Switch';\nexport { default as Tab } from './Tab';\nexport { default as Table } from './Table';\nexport { default as TableBody } from './TableBody';\nexport { default as TableCell } from './TableCell';\nexport { default as TableFooter } from './TableFooter';\nexport { default as TableHead } from './TableHead';\nexport { default as TablePagination } from './TablePagination';\nexport { default as TableRow } from './TableRow';\nexport { default as TableSortLabel } from './TableSortLabel';\nexport { default as Tabs } from './Tabs';\nexport { default as TextField } from './TextField';\nexport { default as Toolbar } from './Toolbar';\nexport { default as Tooltip } from './Tooltip';\nexport { default as Typography } from './Typography';\nexport { default as useMediaQuery } from './useMediaQuery';\nexport { default as useScrollTrigger } from './useScrollTrigger';\nexport { default as withMobileDialog } from './withMobileDialog';\nexport { default as withWidth } from './withWidth';\nexport { default as Zoom } from './Zoom';"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;;;;;;AAEA;;;;;;AAMA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;AAMA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAFA;AAOA;AAEA;;;;;;;;;AAMA;AACA;AACA;AAEA;;;;;;;;AAKA;AAEA;AACA;AAGA;AACA;;;;;;AAEA;;;;;;;;;AAEA;;;AAEA;;;;;;;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AAGA;AACA;AAAA;AACA;;AAXA;AACA;;;;;;;;AAFA;AACA;;AADA;;;;;AAAA;AACA;;AADA;;;;;AAcA;AACA;;;;;;;;;;;;;;;;;AAEA;AAEA;AAGA;AAAA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAFA;AAKA;;;AAEA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAJA;AAMA;AAEA;;;;;;;;;;AAOA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;AAMA;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAEA;AACA;;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAEA;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AACA;AACA;;;;AAJA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1MA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}